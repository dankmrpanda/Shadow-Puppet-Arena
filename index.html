<!DOCTYPE html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=no"><title>Spell Cat</title><style>*{margin:0;padding:0}body{background:#1a0a2e;overflow:hidden;touch-action:none;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center}#c{background:#2d1b4e;border-radius:8px;display:block;cursor:crosshair;max-width:100%;max-height:70vh;touch-action:none}#s{color:#e8c4ff;font:14px sans-serif;margin-top:8px;text-align:center}</style></head><body><canvas id=c width=280 height=400></canvas><div id=s>â€” line â—‹ circle ~ zigzag. Draw on ghosts!</div><script>
(function(){
var c=document.getElementById('c'),s=document.getElementById('s'),x=c.getContext('2d');
var W=280,H=400,path=[],ghosts=[],lives=3,score=0,wave=0;
var shapes=['â€”','â—‹','~'];
function rnd(a,b){return a+Math.random()*(b-a)|0}
function drawBG(){
x.fillStyle='#2d1b4e';x.fillRect(0,0,W,H);
x.fillStyle='#4a2d6e';for(var i=0;i<H;i+=40)x.fillRect(0,i,W,2);
}
function addGhost(){
var sym=rnd(0,3);
ghosts.push({x:rnd(60,W-60),y:-30,sym:sym,speed:1.2+wave*.2});
}
function drawGhost(g){
x.fillStyle='rgba(255,255,255,.9)';x.beginPath();x.arc(g.x,g.y,25,0,Math.PI*2);x.fill();
x.fillStyle='#1a0a2e';x.font='bold 20px sans-serif';x.textAlign='center';x.fillText(shapes[g.sym],g.x,g.y+8);
x.fillStyle='#333';x.beginPath();x.arc(g.x-8,g.y-5,5,0,Math.PI*2);x.arc(g.x+8,g.y-5,5,0,Math.PI*2);x.fill();
}
function analyze(p){
if(p.length<10)return -1;
var mx=1e9,my=1e9,Mx=-1e9,My=-1e9;
for(var i=0;i<p.length;i++){mx=Math.min(mx,p[i].x);my=Math.min(my,p[i].y);Mx=Math.max(Mx,p[i].x);My=Math.max(My,p[i].y)}
var w=Mx-mx,h=My-my,sz=Math.max(w,h,1);
var st=p[0],en=p[p.length-1],dist=Math.hypot(en.x-st.x,en.y-st.y);
var turns=0;for(var i=2;i<p.length;i++){var a=Math.atan2(p[i].y-p[i-1].y,p[i].x-p[i-1].x),b=Math.atan2(p[i-1].y-p[i-2].y,p[i-1].x-p[i-2].x);if(Math.abs(a-b)>.5)turns++}
if(dist<sz*.3&&p.length>15)return 1;
if(turns>3)return 2;
if(w>h*1.5||h>w*1.5)return 0;
return -1;
}
function hit(shape){
var cx=0,cy=0;for(var i=0;i<path.length;i++){cx+=path[i].x;cy+=path[i].y}
cx/=path.length;cy/=path.length;
var d=100,t=-1;
for(var i=0;i<ghosts.length;i++){
var dist=Math.hypot(ghosts[i].x-cx,ghosts[i].y-cy);
if(ghosts[i].sym===shape&&dist<d){d=dist;t=i}}
return t;
}
function gameLoop(){
drawBG();
x.fillStyle='#ff9';x.font='20px sans-serif';x.fillText('â™¥'.repeat(lives),10,25);
x.fillText(score,W-50,25);
x.fillStyle='#e8c4ff';x.font='24px sans-serif';x.textAlign='center';
x.fillText('ðŸ±',W/2,H-30);
for(var i=ghosts.length-1;i>=0;i--){
var g=ghosts[i];g.y+=g.speed;drawGhost(g);
if(g.y>H-40){ghosts.splice(i,1);lives--;if(lives<=0){s.textContent='Game Over! Tap to restart';return}}}
if(ghosts.length<2+wave)addGhost();
if(path.length>1){x.strokeStyle='rgba(255,200,100,.9)';x.lineWidth=6;x.lineCap='round';x.beginPath();x.moveTo(path[0].x,path[0].y);for(var i=1;i<path.length;i++)x.lineTo(path[i].x,path[i].y);x.stroke()}
requestAnimationFrame(gameLoop);
}
function onDown(e){
var r=c.getBoundingClientRect(),sx=c.width/r.width,sy=c.height/r.height;
var px=(e.touches?e.touches[0].clientX:e.clientX)-r.left,py=(e.touches?e.touches[0].clientY:e.clientY)-r.top;
path=[{x:px*sx,y:py*sy}];
}
function onMove(e){
if(path.length===0)return;
var r=c.getBoundingClientRect(),sx=c.width/r.width,sy=c.height/r.height;
var px=(e.touches?e.touches[0].clientX:e.clientX)-r.left,py=(e.touches?e.touches[0].clientY:e.clientY)-r.top;
path.push({x:px*sx,y:py*sy});
}
function onUp(){
if(path.length<10)return;
var shape=analyze(path);
if(shape>=0){
var idx=hit(shape);
if(idx>=0){ghosts.splice(idx,1);score+=10;if(score%50===0&&score>0)wave++}
else s.textContent='Miss! Draw on ghosts';
}
path=[];
}
c.addEventListener('touchstart',function(e){e.preventDefault();onDown(e)});
c.addEventListener('touchmove',function(e){e.preventDefault();onMove(e)});
c.addEventListener('touchend',function(e){e.preventDefault();if(e.touches.length===0)onUp()});
c.addEventListener('mousedown',onDown);
c.addEventListener('mousemove',function(e){if(e.buttons)onMove(e)});
c.addEventListener('mouseup',onUp);
c.addEventListener('mouseleave',function(){if(path.length)path=[]});
gameLoop();
document.addEventListener('click',function(){if(lives<=0){lives=3;score=0;wave=0;ghosts=[];s.textContent='â€” line â—‹ circle ~ zigzag. Draw on ghosts!';gameLoop()}});
})();
</script></body></html>
